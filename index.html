<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tienda JSON (debug)</title>
<style>
  body{font-family:Arial;margin:20px;background:#f4f4f4}
  h1{text-align:center}
  .container{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}
  .card{background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.12);text-align:center}
  .error{color:#c00;background:#fee;padding:10px;border-radius:6px;margin:10px 0}
  #status{font-size:.9rem;color:#333;margin-bottom:10px}
</style>
</head>
<body>
  <h1>Productos Disponibles</h1>
  <div id="status">Cargando <strong>products.json</strong> desde: <span id="url"></span></div>
  <div id="error" class="error" style="display:none"></div>
  <div id="products" class="container"></div>

<script>
  const url = "products.json";
  document.getElementById('url').innerText = url;

  fetch(url)
    .then(async res => {
      if(!res.ok) {
        const txt = await res.text().catch(()=>res.statusText);
        throw new Error(`HTTP ${res.status} ${res.statusText} â€” ${txt}`);
      }
      return res.json();
    })
    .then(data => {
      const list = document.getElementById('products');
      if(!data || !Array.isArray(data.products)) {
        throw new Error('Formato JSON inesperado: falta la propiedad "products" (array).');
      }
      data.products.forEach(p => {
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `
          <img src="${p.image}" alt="${p.name}" style="width:100%;height:160px;object-fit:cover;border-radius:6px">
          <h3>${p.name}</h3>
          <p style="color:green;font-weight:bold">$${Number(p.price).toFixed(2)}</p>
          <p>${p.description}</p>
          <p style="font-size:14px">Stock: ${p.stock}</p>
        `;
        list.appendChild(div);
      });
      document.getElementById('status').innerText = 'Productos cargados correctamente.';
    })
    .catch(err => {
      document.getElementById('error').style.display = 'block';
      document.getElementById('error').innerText = 'Error cargando JSON: ' + err.message;
      console.error(err);
      document.getElementById('status').innerText = 'No se pudieron cargar los productos.';
    });
</script>
</body>
</html>
